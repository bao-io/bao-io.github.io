---
title: 如何合法的请求国外接口
date: 2023-07-26
duration: 5min
---

## 大家共同的顾虑

也许你或者你的公司为了找到一个稳定的方法来访问来访问国外的接口，试图在服务器上**搭建 VPN 服务**来做代理层，但这**在国内是违法的**。我也试图出了一期如何搭建 VPN 的教程，但不出我所料不给过审，所以我就在寻找一些在国外有服务器机房的第三方服务商，还真给我找到了，今天就来给大家分享一下阿里云的`函数计算FC`。

## 原理

其实就是我们先写一个代理服务器的项目，**不懂的可以看我上期分享的文章**，然后把我们的代码部署到他们的服务器上，只要我们选择的服务器是**国外的服务器**，那么就能正常的访问国外的接口。最后它的计费是通过请求的数量进行计算，元宝看了一下不贵，如果是公司想使用国外的接口，这种方式是最稳定且合法的。

## 如何使用

- 先打开阿里云函数计算的介绍页面：`https://free.aliyun.com/?spm=a2c4g.11174283.0.0.4a753e72uularo&product=9555928&crowd=personal`领取一下免费大礼包

![](/images/5d1adadf-5c97-461e-83bd-128424e165e9.webp)

- 进入函数计算 FC 的`控制台`，点击**服务及函数**，然后在最上面切换**国外站点**。

![](/images/2cd54b66-b8e2-4e78-9952-902b5f4b342a.webp)

- 点击创建服务，然后填写基本信息，确定

![](/images/b6c6f5ce-4a6c-4a0f-9b92-20ad98767cb8.webp)

- 点击创建函数，先选择`使用自定义运行时创建`, 在函数内填写函数名称，选择`处理HTTP请求`，然后上传我们代理服务器的代码，代码可以查看我的仓库`https://github.com/LaiBaoYuan/server-api-proxy`，填写好**启动命令**以及程序启动的**端口**，最后点击创建即可。

![](/images/15f0435b-4228-4a7b-a966-f2edb04d9e4c.webp)

- 点击`触发器管理（URL）`查看公网的访问域名，之后的所有代理都可以走这个域名啦，当然也可以自定义自己的域名，点击公网域名即可绑定自己的域名。

![](/images/e94ed557-d137-4269-bc55-a5866080a1e2.webp)

![](/images/e0f658b2-f98e-424c-ac15-325ed1c198cd.webp)

## 测试

我的程序是使用这个`/proxy/openai`地址来代理 openai 的接口地址`https://api.openai.com`，只要代理访问的结果能和原来地址访问的结果一致，那么就证明代理成功啦。

![](/images/50a65706-e750-41c5-8ad5-a181b1a153b2.webp)

![](/images/a2f17978-0870-4cdd-a183-d2d046375e89.webp)
